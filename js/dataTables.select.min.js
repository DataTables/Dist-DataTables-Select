/*!
 Select for DataTables 1.3.2-dev
 2015-2019 SpryMedia Ltd - datatables.net/license/mit
*/
(function(e){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(i){return e(i,window,document)}):"object"===typeof exports?module.exports=function(i,m){i||(i=window);if(!m||!m.fn.dataTable)m=require("datatables.net")(i,m).$;return e(m,i,i.document)}:e(jQuery,window,document)})(function(e,i,m,h){function x(c,b,a){var d;d=function(a,b){if(a>b)var d=b,b=a,a=d;var f=!1;return c.columns(":visible").indexes().filter(function(c){c===a&&(f=!0);return c===b?(f=!1,!0):f})};var f=
function(a,b){var d=c.rows({search:"applied"}).indexes();if(d.indexOf(a)>d.indexOf(b))var f=b,b=a,a=f;var e=!1;return d.filter(function(c){c===a&&(e=!0);return c===b?(e=!1,!0):e})};!c.cells({selected:!0}).any()&&!a?(d=d(0,b.column),a=f(0,b.row)):(d=d(a.column,b.column),a=f(a.row,b.row));a=c.cells(a,d).flatten();c.cells(b,{selected:!0}).any()?c.cells(a).deselect():c.cells(a).select()}function t(c){var b=c.settings()[0]._select.selector;e(c.table().container()).off("mousedown.dtSelect",b).off("mouseup.dtSelect",
b).off("click.dtSelect",b);e("body").off("click.dtSelect"+z(c.table().node()))}function A(c){var b=e(c.table().container()),a=c.settings()[0],d=a._select.selector,f;b.on("mousedown.dtSelect",d,function(a){if(a.shiftKey||a.metaKey||a.ctrlKey)b.css("-moz-user-select","none").one("selectstart.dtSelect",d,function(){return!1});i.getSelection&&(f=i.getSelection())}).on("mouseup.dtSelect",d,function(){b.css("-moz-user-select","")}).on("click.dtSelect",d,function(a){var b=c.select.items();if(f){var d=i.getSelection();
if((!d.anchorNode||e(d.anchorNode).closest("table")[0]===c.table().node())&&d!==f)return}var d=c.settings()[0],k=c.settings()[0].oClasses.sWrapper.trim().replace(/ +/g,".");if(e(a.target).closest("div."+k)[0]==c.table().container()&&(k=c.cell(e(a.target).closest("td, th")),k.any())){var g=e.Event("user-select.dt");l(c,g,[b,k,a]);g.isDefaultPrevented()||(g=k.index(),"row"===b?(b=g.row,u(a,c,d,"row",b)):"column"===b?(b=k.index().column,u(a,c,d,"column",b)):"cell"===b&&(b=k.index(),u(a,c,d,"cell",b)),
d._select_lastCell=g)}});e("body").on("click.dtSelect"+z(c.table().node()),function(b){a._select.blurable&&!e(b.target).parents().filter(c.table().container()).length&&(0!==e(b.target).parents("html").length&&!e(b.target).parents("div.DTE").length)&&q(a,!0)})}function l(c,b,a,d){if(!d||c.flatten().length)"string"===typeof b&&(b+=".dt"),a.unshift(c),e(c.table().node()).trigger(b,a)}function B(c,b,a,d){var f=c[b+"s"]({search:"applied"}).indexes(),d=e.inArray(d,f),n=e.inArray(a,f);if(!c[b+"s"]({selected:!0}).any()&&
-1===d)f.splice(e.inArray(a,f)+1,f.length);else{if(d>n)var g=n,n=d,d=g;f.splice(n+1,f.length);f.splice(0,d)}c[b](a,{selected:!0}).any()?(f.splice(e.inArray(a,f),1),c[b+"s"](f).deselect()):c[b+"s"](f).select()}function q(c,b){if(b||"single"===c._select.style){var a=new g.Api(c);a.rows({selected:!0}).deselect();a.columns({selected:!0}).deselect();a.cells({selected:!0}).deselect()}}function u(c,b,a,d,f){var e=b.select.style(),g=b.select.toggleable(),j=b[d](f,{selected:!0}).any();if(!j||g)"os"===e?c.ctrlKey||
c.metaKey?b[d](f).select(!j):c.shiftKey?"cell"===d?x(b,f,a._select_lastCell||null):B(b,d,f,a._select_lastCell?a._select_lastCell[d]:null):(c=b[d+"s"]({selected:!0}),j&&1===c.flatten().length?b[d](f).deselect():(c.deselect(),b[d](f).select())):"multi+shift"==e?c.shiftKey?"cell"===d?x(b,f,a._select_lastCell||null):B(b,d,f,a._select_lastCell?a._select_lastCell[d]:null):b[d](f).select(!j):b[d](f).select(!j)}function z(c){return c.id.replace(/[^a-zA-Z0-9\-\_]/g,"-")}function r(c,b){return function(a){return a.i18n("buttons."+
c,b)}}function v(c){c=c._eventNamespace;return"draw.dt.DT"+c+" select.dt.DT"+c+" deselect.dt.DT"+c}var g=e.fn.dataTable;g.select={};g.select.version="1.3.2-dev";g.select.init=function(c){var b=c.settings()[0],a=b.oInit.select,d=g.defaults.select,a=a===h?d:a,d="row",f="api",n=!1,y=!0,j=!0,k="td, th",i="selected",s=!1;b._select={};if(!0===a)f="os",s=!0;else if("string"===typeof a)f=a,s=!0;else if(e.isPlainObject(a)&&(a.blurable!==h&&(n=a.blurable),a.toggleable!==h&&(y=a.toggleable),a.info!==h&&(j=a.info),
a.items!==h&&(d=a.items),f=a.style!==h?a.style:"os",s=!0,a.selector!==h&&(k=a.selector),a.className!==h))i=a.className;c.select.selector(k);c.select.items(d);c.select.style(f);c.select.blurable(n);c.select.toggleable(y);c.select.info(j);b._select.className=i;e.fn.dataTable.ext.order["select-checkbox"]=function(a,b){return this.api().column(b,{order:"index"}).nodes().map(function(b){return"row"===a._select.items?e(b).parent().hasClass(a._select.className):"cell"===a._select.items?e(b).hasClass(a._select.className):
!1})};!s&&e(c.table().node()).hasClass("selectable")&&c.select.style("os")};e.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(c,b){g.ext.selector[b.type].push(function(a,c,f){var c=c.selected,e,g=[];if(!0!==c&&!1!==c)return f;for(var j=0,k=f.length;j<k;j++)e=a[b.prop][f[j]],(!0===c&&!0===e._select_selected||!1===c&&!e._select_selected)&&g.push(f[j]);return g})});g.ext.selector.cell.push(function(c,b,a){var b=b.selected,d,f=[];if(b===h)return a;for(var e=0,g=a.length;e<
g;e++)d=c.aoData[a[e].row],(!0===b&&d._selected_cells&&!0===d._selected_cells[a[e].column]||!1===b&&(!d._selected_cells||!d._selected_cells[a[e].column]))&&f.push(a[e]);return f});var o=g.Api.register,p=g.Api.registerPlural;o("select()",function(){return this.iterator("table",function(c){g.select.init(new g.Api(c))})});o("select.blurable()",function(c){return c===h?this.context[0]._select.blurable:this.iterator("table",function(b){b._select.blurable=c})});o("select.toggleable()",function(c){return c===
h?this.context[0]._select.toggleable:this.iterator("table",function(b){b._select.toggleable=c})});o("select.info()",function(c){return c===h?this.context[0]._select.info:this.iterator("table",function(b){b._select.info=c})});o("select.items()",function(c){return c===h?this.context[0]._select.items:this.iterator("table",function(b){b._select.items=c;l(new g.Api(b),"selectItems",[c])})});o("select.style()",function(c){return c===h?this.context[0]._select.style:this.iterator("table",function(b){b._select.style=
c;if(!b._select_init){var a=new g.Api(b);b.aoRowCreatedCallback.push({fn:function(a,c,d){c=b.aoData[d];c._select_selected&&e(a).addClass(b._select.className);a=0;for(d=b.aoColumns.length;a<d;a++)(b.aoColumns[a]._select_selected||c._selected_cells&&c._selected_cells[a])&&e(c.anCells[a]).addClass(b._select.className)},sName:"select-deferRender"});a.on("preXhr.dt.dtSelect",function(c,b){if(b===a.settings()[0]){var d=a.rows({selected:!0}).ids(!0).filter(function(a){return a!==h}),e=a.cells({selected:!0}).eq(0).map(function(b){var c=
a.row(b.row).id(!0);return c?{row:c,column:b.column}:h}).filter(function(a){return a!==h});a.one("draw.dt.dtSelect",function(){a.rows(d).select();e.any()&&e.each(function(b){a.cells(b.row,b.column).select()})})}});a.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",function(){var b=a.settings()[0];if(b._select.info&&b.aanFeatures.i&&"api"!==a.select.style()){var c=a.rows({selected:!0}).flatten().length,d=a.columns({selected:!0}).flatten().length,g=a.cells({selected:!0}).flatten().length,
h=function(b,c,d){b.append(e('<span class="select-item"/>').append(a.i18n("select."+c+"s",{_:"%d "+c+"s selected","0":"",1:"1 "+c+" selected"},d)))};e.each(b.aanFeatures.i,function(a,b){var b=e(b),f=e('<span class="select-info"/>');h(f,"row",c);h(f,"column",d);h(f,"cell",g);var i=b.children("span.select-info");i.length&&i.remove();""!==f.text()&&b.append(f)})}});a.on("destroy.dtSelect",function(){a.rows({selected:!0}).deselect();t(a);a.off(".dtSelect")})}var d=new g.Api(b);t(d);"api"!==c&&A(d);l(new g.Api(b),
"selectStyle",[c])})});o("select.selector()",function(c){return c===h?this.context[0]._select.selector:this.iterator("table",function(b){t(new g.Api(b));b._select.selector=c;"api"!==b._select.style&&A(new g.Api(b))})});p("rows().select()","row().select()",function(c){var b=this;if(!1===c)return this.deselect();this.iterator("row",function(a,b){q(a);a.aoData[b]._select_selected=!0;e(a.aoData[b].nTr).addClass(a._select.className)});this.iterator("table",function(){l(b,"select",["row",b.rows({selected:!0}).indexes().toArray()],
!0)});return this});p("columns().select()","column().select()",function(c){var b=this;if(!1===c)return this.deselect();this.iterator("column",function(a,b){q(a);a.aoColumns[b]._select_selected=!0;var c=(new g.Api(a)).column(b);e(c.header()).addClass(a._select.className);e(c.footer()).addClass(a._select.className);c.nodes().to$().addClass(a._select.className)});this.iterator("table",function(){l(b,"select",["column",b.columns({selected:!0}).indexes().toArray()],!0)});return this});p("cells().select()",
"cell().select()",function(c){var b=this;if(!1===c)return this.deselect();this.iterator("cell",function(a,b,c){q(a);b=a.aoData[b];b._selected_cells===h&&(b._selected_cells=[]);b._selected_cells[c]=!0;b.anCells&&e(b.anCells[c]).addClass(a._select.className)});this.iterator("table",function(){l(b,"select",["cell",b.cells({selected:!0}).indexes().toArray()],!0)});return this});p("rows().deselect()","row().deselect()",function(){var c=this;this.iterator("row",function(b,a){b.aoData[a]._select_selected=
!1;b._select_lastCell=null;e(b.aoData[a].nTr).removeClass(b._select.className)});this.iterator("table",function(b,a){l(c,"deselect",["row",c[a]],!0)});return this});p("columns().deselect()","column().deselect()",function(){var c=this;this.iterator("column",function(b,a){b.aoColumns[a]._select_selected=!1;var c=new g.Api(b),f=c.column(a);e(f.header()).removeClass(b._select.className);e(f.footer()).removeClass(b._select.className);c.cells(null,a).indexes().each(function(a){var c=b.aoData[a.row],d=c._selected_cells;
c.anCells&&(!d||!d[a.column])&&e(c.anCells[a.column]).removeClass(b._select.className)})});this.iterator("table",function(b,a){l(c,"deselect",["column",c[a]],!0)});return this});p("cells().deselect()","cell().deselect()",function(){var c=this;this.iterator("cell",function(b,a,c){a=b.aoData[a];a._selected_cells[c]=!1;a.anCells&&!b.aoColumns[c]._select_selected&&e(a.anCells[c]).removeClass(b._select.className)});this.iterator("table",function(b,a){l(c,"deselect",["cell",c[a]],!0)});return this});var w=
0;e.extend(g.ext.buttons,{selected:{text:r("selected","Selected"),className:"buttons-selected",limitTo:["rows","columns","cells"],init:function(c,b,a){var d=this;a._eventNamespace=".select"+w++;c.on(v(a),function(){d.enable(-1!==e.inArray("rows",a.limitTo)&&c.rows({selected:!0}).any()||-1!==e.inArray("columns",a.limitTo)&&c.columns({selected:!0}).any()||-1!==e.inArray("cells",a.limitTo)&&c.cells({selected:!0}).any()?!0:!1)});this.disable()},destroy:function(c,b,a){c.off(a._eventNamespace)}},selectedSingle:{text:r("selectedSingle",
"Selected single"),className:"buttons-selected-single",init:function(c,b,a){var d=this;a._eventNamespace=".select"+w++;c.on(v(a),function(){var a=c.rows({selected:!0}).flatten().length+c.columns({selected:!0}).flatten().length+c.cells({selected:!0}).flatten().length;d.enable(1===a)});this.disable()},destroy:function(c,b,a){c.off(a._eventNamespace)}},selectAll:{text:r("selectAll","Select all"),className:"buttons-select-all",action:function(){this[this.select.items()+"s"]().select()}},selectNone:{text:r("selectNone",
"Deselect all"),className:"buttons-select-none",action:function(){q(this.settings()[0],!0)},init:function(c,b,a){var d=this;a._eventNamespace=".select"+w++;c.on(v(a),function(){var a=c.rows({selected:!0}).flatten().length+c.columns({selected:!0}).flatten().length+c.cells({selected:!0}).flatten().length;d.enable(0<a)});this.disable()},destroy:function(c,b,a){c.off(a._eventNamespace)}}});e.each(["Row","Column","Cell"],function(c,b){var a=b.toLowerCase();g.ext.buttons["select"+b+"s"]={text:r("select"+
b+"s","Select "+a+"s"),className:"buttons-select-"+a+"s",action:function(){this.select.items(a)},init:function(b){var c=this;b.on("selectItems.dt.DT",function(b,d,e){c.active(e===a)})}}});e(m).on("preInit.dt.dtSelect",function(c,b){"dt"===c.namespace&&g.select.init(new g.Api(b))});return g.select});
